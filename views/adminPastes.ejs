<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Pastes</title>
    <link href="https://clux.xyz/public/assets/css/black-dashboard.min.css" rel="stylesheet" />
    <link rel="icon" href="public/uploads/avatar-1692572078209-427297268.png" type="image/png" sizes="16x16">
</head>

<body>
    <div class="wrapper">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-wrapper">
                <div class="logo">
                    <a href="https://clux.xyz/" class="simple-text logo-mini">
                      <img src="https://cdn.discordapp.com/attachments/1142466081064243300/1142811423425175672/removal.ai_7e641675-cceb-4fc4-a6fc-c175263e36f2-png-transparent-letter-c-art-logo-c-letter-letter-c-blue-angle-english_1.png" alt="logo">
                    </a>
              
                    <a href="https://clux.xyz/" class="simple-text logo-normal">
                     CLux Paste
                    </a>
                  </div>
              
                  <div class="sidebar-wrapper">
                <ul class="nav">
                    <li class="nav-item active  ">
                        <a  href="https://clux.xyz/admin/dashboard">
                            <i class="tim-icons icon-chart-pie-36"></i>
                            <p>Dashboard</p>
                        </a>
                    </li>
                    <li>
                      <a class="nav-link" href="./users">
                        <i class="tim-icons icon-single-02"></i>
                        <p>Users</p>
                      </a>
                    </li>
                    <li>
                      <a href="./pastes">
                        <i class="tim-icons icon-single-copy-04"></i>
                        <p>Pastes</p>
                      </a>
                    </li>
                    <li>
                      <a href="./notifications.html">
                        <i class="tim-icons icon-bell-55"></i>
                        <p>Reports</p>
                      </a>
                      </li>
            
                     <!-- your sidebar here -->
                  </ul>
                  </div>
            </div>
        </div>
        <!-- End of Sidebar -->

        <!-- Main content -->
        <div class="main-panel">
            <div class="navbar navbar-expand-lg navbar-absolute">
                <h1 class="navbar-brand">Manage Pastes</h1>
            </div>

            <div class="content">
                <div class="container-fluid">
                    <h2>All Pastes</h2>
                    <div class="table-responsive">
                        <table class="table">
                            <thead class="text-primary">
                                <tr>
                                    <th>Name</th>
                                    <th>Link</th>
                                    <th>Creator</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% pastes.forEach(paste => { %>
                                <tr>
                                    <td><%= paste.name %></td>
                                    <td>
                                        <a href="/view/<%= paste._id %>">
                                            View Paste
                                        </a>
                                    </td>
                                    <td style="<%= paste.userId ? paste.userId.customCSS : '' %>">
                                        <%= paste.userId ? paste.userId.username : 'Anonymous' %> 
                                    </td>
                                    <td>
                                        <form action="/admin/pastes/<%= paste._id %>/delete" method="post">
                                            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                                        </form>
                                    </td>
                                </tr>
                                <% }); %>
                            </tbody>
                        </table>
                    </div>

                    <!-- Pagination Controls -->
                    <nav aria-label="Page navigation example">
                      <ul class="pagination justify-content-center">
                        <% for(let i = 1; i <= Math.ceil(totalPastes / 10); i++) { %>
                            <li class="page-item">
                                <a class="page-link" href="?page=<%= i %>"><%= i %></a>
                            </li>
                        <% } %>
                      </ul>
                    </nav>
                </div>
            </div>

            <!-- Footer -->
            <footer class="footer">
                <div class="container-fluid">
                    <p>&copy; 2023 Admin Dashboard</p>
                </div>
            </footer>
        </div>
    </div>

    <!-- Adding required JS for Black Dashboard -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://clux.xyz/public/assets/js/black-dashboard.min.js"></script>
</body>

</html>
